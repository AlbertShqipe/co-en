<% @forms.each do |form| %>
  <div class="form-details">
    <h3><%= form[:type] %> - <%= form[:name] || 'No Name' %></h3>

    <div class="form-meta">
      <p><strong>Created At:</strong> <%= form[:created_at] %></p>
      <p><strong>Updated At:</strong> <%= form[:updated_at] %></p>
    </div>

    <% if form[:type] == "Individual" %>
      <div class="individual-info">
        <p><strong>First Name:</strong> <%= form[:name] %></p>
        <p><strong>Last Name:</strong> <%= form[:last_name] %></p>
        <p><strong>Birth Date:</strong> <%= form[:birth_date] %></p>
        <p><strong>Address:</strong> <%= form[:address] %></p>
        <p><strong>Phone:</strong> <%= form[:phone] %></p>
        <p><strong>Email:</strong> <%= form[:email] %></p>
        <p><strong>Teacher Name:</strong> <%= form[:teacher_name] %></p>
        <p><strong>Dance School:</strong> <%= form[:dance_school] %></p>
        <p><strong>Category:</strong> <%= form[:category] %></p>
        <p><strong>Style:</strong> <%= form[:style] %></p>
        <p><strong>Level:</strong> <%= form[:level] %></p>

        <!-- Correcting the file key check -->
        <% if form[:photo] %>
          <%= render_file_image(form, :photo, @results_prod, @results_prod_1, @results_dev) %>
        <% end %>
        <% if form[:file] %>
          <%= render_file_image(form, :file, @results_prod, @results_prod_1, @results_dev) %>
        <% end %>
        <% if form[:id_card] %>
          <%= render_file_image(form, :id_card, @results_prod, @results_prod_1, @results_dev) %>
        <% end %>
      </div>
    <% elsif form[:type].in?(["DuoForm", "TrioForm", "GroupForm"]) %>
      <div class="group-info">
        <p><strong>Responsable:</strong> <%= form[:responsable] %></p>
        <p><strong>Address:</strong> <%= form[:address] %></p>
        <p><strong>Phone:</strong> <%= form[:phone] %></p>
        <p><strong>Email:</strong> <%= form[:email] %></p>
        <p><strong>Discipline:</strong> <%= form[:discipline] %></p>
        <p><strong>Level:</strong> <%= form[:level] %></p>
        <p><strong>Title of Music:</strong> <%= form[:title_of_music] %></p>
        <p><strong>Composer:</strong> <%= form[:composer] %></p>
        <p><strong>Length of Piece:</strong> <%= form[:length_of_piece] %></p>

        <h4>Participants</h4>
        <% form[:participants].each do |p| %>
          <div class="participant-info">
            <p><strong>First Name:</strong> <%= p[:first_name] %></p>
            <p><strong>Last Name:</strong> <%= p[:last_name] %></p>
            <p><strong>Birth Date:</strong> <%= p[:birth_date] %></p>
            <p><strong>Age:</strong> <%= p[:age] %></p>

            <!-- Correcting the file key check for participants -->
            <% if p[:photo] %>
              <%= render_file_image(p, :photo, @results_prod, @results_prod_1, @results_dev) %>
            <% end %>
            <% if p[:file] %>
              <%= render_file_image(p, :file, @results_prod, @results_prod_1, @results_dev) %>
            <% end %>
            <% if p[:id_card] %>
              <%= render_file_image(p, :id_card, @results_prod, @results_prod_1, @results_dev) %>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>

  </div>
  <hr>
<% end %>
